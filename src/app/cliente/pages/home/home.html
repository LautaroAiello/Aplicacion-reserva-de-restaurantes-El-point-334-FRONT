<section>
  <h2>Novedades ğŸ”¥</h2>
  <div class="grid">
    @if (novedades$ | async; as nuevos) { 
      @for (item of nuevos; track item.id) {
        <app-simple-card
          [title]="item.nombre"
          [src]="item.imagenUrl"
          [id]="+item.id"
          [subtitle]="'Nuevo en ' + item.direccion.ciudad"
          (cardClicked)="cardClicked($event)"
        >
        </app-simple-card>
      } 
    } @else {
      <p>Cargando novedades...</p>
    }
  </div>
</section>

<section>
  <h2>Reservar de nuevo â†»</h2>
  
  <div class="row-container">
    @if (reservarNuevo$ | async; as restaurantes) {
      @if (restaurantes.length > 0) {
        <div class="row">
          @for (item of restaurantes; track item.id) {
            <app-simple-card
              [title]="item.nombre"
              [src]="item.imagenUrl || 'assets/placeholder-food.png'"
              [id]="+item.id"
              [subtitle]="'Tu visita reciente'"
              (cardClicked)="cardClicked($event)"
            >
            </app-simple-card>
          }
        </div>
      } @else {
        <div class="empty-state">
          <p>AÃºn no tienes reservas anteriores.</p>
          <small>Â¡Explora las novedades para comenzar!</small>
        </div>
      }
    } @else {
      <div class="loading-state">
        <p>Cargando tu historial...</p>
      </div>
    }
  </div>
</section>

<section>
  <h2>MÃ¡s Populares ğŸ†</h2>
  <div class="grid">
    @if (masPopulares$ | async; as populares) { 
      @for (item of populares; track item.id) {
        <app-simple-card
          [title]="item.nombre"
          [src]="item.imagenUrl"
          [id]="+item.id"
          
          [subtitle]="(item.cantidadReservas || 0) + ' reservas exitosas'"
          
          (cardClicked)="cardClicked($event)"
        >
        </app-simple-card>
      } 
    } @else {
      <p>Cargando populares...</p>
    }
  </div>
</section>